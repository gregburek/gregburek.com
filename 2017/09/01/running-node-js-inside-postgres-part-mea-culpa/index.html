<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <!-- Use title if it's in the page YAML frontmatter -->
    <title>
      Greg Burek - 
      Running Node.js inside Postgres, Part Mea Culpa
      
    </title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="google-site-verification" content="x-B-7Gh5W7YevI09T48-S4on8MkU9MjG-6XD7aurE7Y" />
    <meta name="google-site-verification" content="hzWlqDEbM4CUsiEb8YrcUdovSZSNx6jySbQkjRXyCCk" />

    <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->

    <link href="/stylesheets/all.css" rel="stylesheet" />
    <script type="text/javascript" src="//use.typekit.net/rtf4ikk.js"></script>
    <script type="text/javascript">try{Typekit.load();}catch(e){}</script>
    <script src="/js/vendor/modernizr-2.6.1.min.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-22983311-2', 'auto');
      ga('send', 'pageview');
    </script>
  </head>
  <body class="x2017 x2017_09 x2017_09_01 x2017_09_01_running-node-js-inside-postgres-part-mea-culpa x2017_09_01_running-node-js-inside-postgres-part-mea-culpa_index">
    <!--[if lt IE 7]>
      <p class="chromeframe">You are using an outdated browser. <a href="http://browsehappy.com/">Upgrade your browser today</a> or <a href="http://www.google.com/chromeframe/?redirect=true">install Google Chrome Frame</a> to better experience this site.</p>
    <![endif]-->

    <header>
  <div class="container">
    <h1>
      <a href="../../../../">Greg Burek</a>
    </h1>
  </div>
</header>


    <div class="container">
        <article class="writing">
    <h1>Running Node.js inside Postgres, Part Mea Culpa</h1>
    <div class="article-details">
      <div class="article-date">
        <i class="fa fa-paper-plane-o"></i>
        September 01, 2017
        <div class="tags">
          tags:
            <a href="/tags/discovery/">discovery</a>,
            <a href="/tags/mea-culpa/">mea culpa</a>,
            <a href="/tags/node/">node</a>,
            <a href="/tags/nodejs/">nodejs</a>,
            <a href="/tags/npm/">npm</a>,
            <a href="/tags/plv8/">plv8</a>,
            <a href="/tags/plv8x/">plv8x</a>,
            <a href="/tags/postgres/">postgres</a>
        </div>
      </div>
    </div>
    <p><a href="/2016/10/08/running-node-js-inside-postgres-part-1">Previously</a>, I wrote about
trying to run node.js code in PLV8 in Postgres. Unfortunately, that effort
sputtered out once I
<a href="https://stackoverflow.com/questions/12666148/does-plv8-support-making-http-calls-to-other-servers">found</a>
<a href="https://github.com/plv8/plv8/issues/190">out</a>
that PLV8 is a &lsquo;trusted&rsquo; languagefor postgres. As documented for
<a href="https://www.postgresql.org/docs/current/static/plperl-trusted.html">PL/Perl</a>:</p>

<blockquote>
<p>Normally, PL/Perl is installed as a &ldquo;trusted&rdquo; programming language named
plperl. In this setup, certain Perl operations are disabled to preserve
security. In general, the operations that are restricted are those that
interact with the environment. This includes file handle operations, require,
and use (for external modules). There is no way to access internals of the
database server process or to gain OS-level access with the permissions of
the server process, as a C function can do. Thus, any unprivileged database
user can be permitted to use this language.</p>
</blockquote>

<p>So, no filesystem access means no unix socket access, which means no network
access. <code>¯\_(ツ)_/¯</code></p>

<p>If <a href="https://github.com/plv8/plv8/issues/222">plv8u</a> lands, I can revisit my
previous goal, but until then&hellip;</p>

  </article>

    </div>

    <footer>
  <div class="container">
    <ul class="social-nav">
      <li>
        <a href="https://twitter.com/gregburek">
          <i class="fa fa-twitter-square"></i>
        </a>
      </li>
       <li>
        <a href="https://github.com/gregburek">
          <i class="fa fa fa-github-square"></i>
        </a>
      </li>
      <li>
        <a href="http://lanyrd.com/profile/gregburek/">
          <i class="fa fa fa-map-marker"></i>
        </a>
      </li>
      <li>
        <a href="http://www.linkedin.com/in/gregburek">
          <i class="fa fa fa-linkedin-square"></i>
        </a>
      </li>
      <li>
      <a href="http://www.flickr.com/photos/gregburek/">
          <i class="fa fa fa-flickr"></i>
        </a>
      </li>
     <li>
        <a href="../../../../feed.xml"><i class="fa fa-rss-square"></i></a>
      </li>
    </ul>
    <nav>
      <ul>
        <li>
        <a href="../../../../about/">About</a>
        </li>
        <li>
        <a href="/tags/">Tags</a>
        </li>
      </ul>
    </nav>
  </div>
</footer>

    <script src="/js/plugins.js"></script>
    <script src="/js/ga.js"></script>
  </body>
</html>
